(function(){function e(){try{return JSON.parse(o.decode(location.hash.replace(/^#/,"")))}catch(e){return null}}function n(){var n=e();n&&n.pattern&&(u.value=n.pattern,t())}function t(e){l.innerHTML="",c.innerHTML="",document.body.className="is-loading has-results",clearTimeout(y),a(l,u.value,function(n){function t(){c.innerHTML=n.stack.replace(/\n/g,"<br>"),document.body.className="error"}n?e?y=setTimeout(t,1e3):t():(updateFragment(),document.body.className="has-results")})}var a=require("regexper"),r=require("matthewmueller-debounce"),o=require("ForbesLindesay-base64"),u=document.getElementById("regexp_input"),c=document.getElementById("error"),l=document.getElementById("paper-container"),i=document.getElementById("generate_btn"),s=document.getElementById("permalinkBTN"),d=document.getElementById("permalink");updateFragment=r(function(){location.hash=o.encode(JSON.stringify({pattern:u.value}))},1e3),n(),window.onhashchange=n,s.onclick=function(){location.hash=o.encode(JSON.stringify({pattern:u.value})),d.src="http://tinyurl.com/api-create.php?url="+encodeURIComponent(location.href)};var m=null;i.onclick=function(){l.innerHTML="",c.innerHTML="",document.body.className="is-loading has-results",a(l,u.value,function(e){e&&(c.innerHTML=e.stack.replace(/\n/g,"<br>")),document.body.className="has-results"})};var y,p=r(function(){t(!0)},200);u.onkeyup=function(e){(u.value!==m||13===e.keyCode)&&(m=u.value,d.src="",s.setAttribute("style",""),0===u.value.length?(l.innerHTML="",c.innerHTML="",document.body.className="",s.setAttribute("style","display: none"),i.setAttribute("style","display: none")):40>u.value.length?(i.setAttribute("style","display: none"),p()):(i.setAttribute("style",""),l.innerHTML="",c.innerHTML="",document.body.className="",13===e.keyCode&&t()))}})();